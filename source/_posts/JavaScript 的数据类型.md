---
title: JavaScript 的数据类型
date: 2017-08-03 18:27:28
tags: JavaScript
---

------
### String（待更新）

### Number（待更新）

### Boolean（待更新）

### undefined（待更新）

### null（null 也属于 Object）（待更新）

### object es6: * （待更新）
  1. Array
  2. Date
  3. RegExp
  4. NodeList       -->  document.querySelectorAll('div')
  5. HTMLCollection -->  getElementsByTagName('div')
  6. Set(WeakSet)*
  7. Map(WeakMap)*
  8. Symbol*


### 判断类型有这几种方法：

  * typeof           可以检测原始类型和函数，局限：用typeof 去判断一个没有声明的变量会报错
  * instanceof       根据构造函数来区别对象
  * Object.prototype.toString.call()  可以判断任何一个数据
  * isNaN            检测 NaN

### 基本类型和引用类型
  1. 根据数据在栈中存储的类型
  2. 数据的表现形式

  1. 在栈中存储的类型：
    a. 数据的值实际存储在栈中的则是引用类型
    b. 数据的值实际存储在堆中，而在栈中只是保留了堆物理空间的引用

    这种划分的手法是抽象的
    基本类型，值存在内存的栈中，相互对立，没有直接的联系
    引用类性：值存在内存的栈中，内部有联系（我们可以通过其他方法，切断联系，重新使用一块内存空间，JSON.parse(JSON.stringify)）

  2. 具体的划分 (数据表现的形式)
    5 种基本类型：string, boolean, number, null, undefined
    1 引用类型： 对象

    访问变量的方式：按值和按引用访问

    变量与实际数据的关系
    变量与变量之间的关系

    变量的赋值

```js
  var a = 9; // 变量和基本类型值的关系
  var b = a; // 变量和变量之间的关系
```

1. 在 JavaScript 的语法层面：
   * 首先使用  var 申明的变量，是被提前到作用域的顶部，并初始化为 undefined， 当 JavaScript 的执行到赋值的位置就把对应的值分配给指定的变量，遇到变量之间的赋值首先是先访问赋值的变量的值，然后再把该值赋给指定的变量。

2. 在浏览操作内存的层面：
  * 首先是在栈中创建两个变量 a 和 b，一开始初始化为 undefined ，遇到值的时候就直接把这个值分配给变量，a 的值 为 9；JavaScript 继续执行下一条语句，先在栈中访问 a 变量的值，并把 a 的值进行复制一份，栈中找到 b 的位置，并把该值分配给 b。刚才的操作我们值说的在栈中的操作过程。

```js
  var a = {};
  var b = a;
```
1. 若是我们创建一个引用类型的值的时候情况会稍稍不同：具体的值存储的位置有改变。引用的值的类型实际是存在堆中，在栈中分配个变量的只是堆中的一个地址的指针。语法的层面和基本类型的赋值的过程相差无几。

2. 在浏览器内存的层面：
    * 首先是在栈中创建 2 个变量 a 和 b，并一开始初始化为 undefined, 遇到引用类型的值，首先是在堆一个物理空间中创建并存储，赋值的时候就把这个物理空间的指针分配给栈中 a 变量。当 JavaScript 执行到下一句的时候，先是访问栈中 a 变量的值，这个值是一个指针，指向存储在堆中实际的值，把这个指针复制一个并分配给在栈中的 b 变量

值的传递：
    在函数中参数中按值传递， 函数的接受的参数所发生的事情

```js
  function add (num1, num2) {
      return num1 + num2
  };
  add(10, 100)
```
1. 首先在 JavaScript 语法层面：
    * Js 的解析器解析之后，会把 add 这个函数声明提到该作用域的最顶层。当执行到调用的时候就会把创建好的两个值，传递给 add 这个函数两个内部变量（依次皴法在 arguments 这个类数组中）

2. 在浏览器内存的层面：
    * 首先 Js 的解析器解析之后，并在内存的栈中创建一个 add 的变量，并且他的值就是一个指针，这个指针指向堆中的一个物理地址，这个物理地址所在的空间就存储这个 function, 这个 function 声明了两个局部变量 num1 和 num2，没有调用的时候并不会占有内存空间。当 Js 执行到 add(10, 100) 的时候会临时创建两个数据，并在栈中创建并存放 2 个变量 num1 和 num2 ，在调用这个函数的同时临时产生的数据会依次分配到栈中对应变量的位置。同时函数有自己的隐藏的变量 arguments 这个类数组中。

---------

参考文献：

* 《JavaScript 高级程序设计》 第三版
